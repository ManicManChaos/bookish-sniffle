:root{--bg1:#07130c;--bg2:#0b1f14;--text:#f7f1e8;--muted:rgba(247,241,232,.72);
--shadow:0 18px 50px rgba(0,0,0,.45);--r:18px}
*{box-sizing:border-box}
body{margin:0}
body.app{font-family:ui-serif,Georgia,"Times New Roman",serif;color:var(--text);
background:radial-gradient(1200px 800px at 20% 10%, rgba(214,78,160,.18), transparent 55%),
radial-gradient(1200px 800px at 80% 20%, rgba(86,176,120,.16), transparent 60%),
linear-gradient(180deg,var(--bg2),var(--bg1))}
.container{max-width:980px;margin:0 auto;padding:18px}
.topbar{position:sticky;top:0;z-index:5;display:flex;justify-content:space-between;gap:12px;align-items:center;
padding:14px 18px;background:linear-gradient(90deg, rgba(214,78,160,.22), rgba(86,176,120,.18), rgba(214,177,90,.16));
border-bottom:1px solid rgba(255,255,255,.08);backdrop-filter:blur(8px)}
.brand{font-weight:1000;letter-spacing:.5px;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,sans-serif}
.nav{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.navlink,.navbtn{padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(0,0,0,.18);
color:var(--text);font-weight:900;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,sans-serif}
a{text-decoration:none;color:inherit}
.card{
  position:relative;
  border:1px solid rgba(255,255,255,.12);
  box-shadow:var(--shadow);
  border-radius:var(--r);
  padding:16px;
  margin:14px 0;
  background:rgba(10,18,14,.40);
  overflow:hidden;
}
.card::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  background:linear-gradient(180deg, rgba(16,47,30,.78), rgba(14,43,27,.72));
  backdrop-filter: blur(14px) saturate(120%);
  -webkit-backdrop-filter: blur(14px) saturate(120%);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
  pointer-events:none;
}
.card>*{ position:relative; z-index:1; }
h2{margin:0 0 10px;font-size:20px;letter-spacing:.3px}
.muted{color:var(--muted);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,sans-serif}
.field{display:grid;gap:6px;margin:10px 0}
label{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,sans-serif;font-size:12px;letter-spacing:.35px;color:rgba(247,241,232,.78)}
input,select,textarea{width:100%;padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.12);
background:rgba(0,0,0,.20);color:var(--text);outline:none;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,sans-serif}
textarea{resize:vertical}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
@media (max-width:780px){.grid2,.grid3{grid-template-columns:1fr}}

 .actions{display:flex;gap:12px;align-items:center;padding:6px 2px 24px}
.btn{border:1px solid rgba(255,255,255,.16);border-radius:999px;padding:12px 14px;background:rgba(0,0,0,.22);
color:var(--text);font-weight:900;letter-spacing:.4px;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,sans-serif}
.btn.primary{background:linear-gradient(90deg, rgba(214,78,160,.85), rgba(214,177,90,.85));color:#08140c}
.btn.gold{background:linear-gradient(90deg, rgba(214,177,90,.95), rgba(214,78,160,.75));color:#08140c}
details{border:1px solid rgba(255,255,255,.10);border-radius:16px;padding:12px;background:rgba(0,0,0,.12)}
summary{cursor:pointer;list-style:none;display:flex;justify-content:space-between;gap:10px;align-items:center;
font-weight:1000;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,sans-serif}
summary::-webkit-details-marker{display:none}
.preview{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.preview img{width:92px;height:92px;border-radius:16px;object-fit:cover;border:1px solid rgba(214,177,90,.25)}

/* Moments rows */
.momentRow{display:flex;gap:12px;align-items:flex-end;flex-wrap:wrap;margin:10px 0}
.momentRow .field{margin:0}
.momentRow .grow{flex:1;min-width:220px}

/* Inline input (Calendar → Outlook) */
.inlineInput{display:flex;gap:10px;align-items:center}
.inlineInput input{flex:1}
.miniBtn{
  border:1px solid rgba(255,215,170,.28);
  background:rgba(0,0,0,.22);
  color:var(--text);
  font-weight:900;
  border-radius:999px;
  padding:10px 12px;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,sans-serif;
  cursor:pointer;
}
.miniBtn:active{transform:scale(.99)}
.list{display:grid;gap:10px}
.item{border:1px solid rgba(255,255,255,.10);border-radius:16px;padding:12px;background:rgba(0,0,0,.14);text-align:left}
.item strong{display:block}
.viewer{white-space:pre-wrap;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,sans-serif;font-size:14px;line-height:1.4}
.bar{height:12px;border-radius:999px;background:rgba(255,255,255,.10);overflow:hidden;border:1px solid rgba(255,255,255,.10);margin-top:10px}
#cycleFill{height:100%;width:0%;background:linear-gradient(90deg, rgba(214,177,90,.95), rgba(214,78,160,.85), rgba(86,176,120,.85))}
/* --- Dropdowns: make them look intentional on iPad --- */
select, input[type="text"], input[type="date"], input[type="time"], textarea {
  width: 100%;
  border-radius: 16px;
  padding: 12px 14px;
  border: 1px solid rgba(255, 215, 170, 0.22);
  background: rgba(10, 18, 14, 0.55);
  color: #fff;
  outline: none;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04);
}

select {
  appearance: none;
  -webkit-appearance: none;
  background-image:
    linear-gradient(45deg, transparent 50%, rgba(255,215,170,0.9) 50%),
    linear-gradient(135deg, rgba(255,215,170,0.9) 50%, transparent 50%);
  background-position:
    calc(100% - 18px) calc(50% - 3px),
    calc(100% - 12px) calc(50% - 3px);
  background-size: 6px 6px, 6px 6px;
  background-repeat: no-repeat;
  padding-right: 38px;
}

select option { color: #111; } /* iOS picker uses system UI; this keeps options readable */

/* =========================
   COVER (icon-sigil version)
   ========================= */
body.cover{
  margin:0;
  min-height:100svh;
  display:grid;
  place-items:center;
  padding:24px;
  color:#fff;
  text-align:center;
  overflow-x:hidden;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
  background:
    radial-gradient(1000px 700px at 18% 18%, rgba(214,78,160,.22), transparent 60%),
    radial-gradient(900px 650px at 78% 18%, rgba(86,176,120,.22), transparent 60%),
    radial-gradient(900px 650px at 60% 80%, rgba(214,177,90,.18), transparent 62%),
    #050a08;
}
.coverWrap{width:min(560px,92vw);display:grid;place-items:center;gap:18px;position:relative}
.sigil{
  width:min(420px,78vw);
  aspect-ratio:1/1;
  position:relative;
  display:grid;
  place-items:center;
  filter: drop-shadow(0 30px 70px rgba(0,0,0,.6));
}
.sigil img{
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:28px;
  border:1px solid rgba(255,215,170,.25);
}
.sigilTitle{
  position:absolute;
  bottom:10%;
  left:50%;
  transform:translateX(-50%);
  width:86%;
  padding:10px 12px;
  border-radius:16px;
  background: linear-gradient(180deg, rgba(0,0,0,.28), rgba(0,0,0,.10));
  border:1px solid rgba(255,215,170,.16);
  font-weight:1000;
  letter-spacing:.12em;
  line-height:1.05;
  text-transform:uppercase;
  text-shadow: 0 2px 14px rgba(0,0,0,.55);
  backdrop-filter: blur(6px);
}
.enterBtn{
  width:min(420px,88vw);
  border-radius:999px;
  padding:14px 18px;
  border:1px solid rgba(255,215,170,.28);
  background: linear-gradient(90deg, rgba(86,176,120,.35), rgba(214,78,160,.28), rgba(214,177,90,.28));
  color:#fff;
  font-weight:1000;
  letter-spacing:.02em;
  display:grid;
  gap:4px;
  cursor:pointer;
}
.enterBtn .enterSub{opacity:.88;font-weight:900;letter-spacing:.04em}
.enterBtn:active{transform:scale(.99)}

/* Full spell-cast (button becomes the spell) */
.enterBtn{position:relative;overflow:hidden;transform:translateZ(0)}
.enterBtn::before{
  content:"";position:absolute;inset:-60%;
  background:linear-gradient(115deg,transparent 38%,rgba(255,255,255,.12) 46%,rgba(255,235,160,.28) 50%,rgba(255,255,255,.10) 54%,transparent 62%);
  transform:translateX(-70%) rotate(10deg);
  opacity:0;
}
.enterBtn::after{
  content:"";position:absolute;inset:-40%;
  background:radial-gradient(circle at 50% 55%,rgba(255,235,160,.22) 0%,rgba(255,235,160,.10) 25%,transparent 55%);
  opacity:0;filter:blur(1px);
}
.enterBtn .spellBurst{position:absolute;inset:0;pointer-events:none;opacity:0}
.enterBtn .spellBurst span{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.6);opacity:0;font-weight:1000;letter-spacing:.02em;color:rgba(255,245,200,.95);filter:drop-shadow(0 0 18px rgba(255,235,160,.65))}
.enterBtn.cast::before{opacity:1;animation:spellShimmer 1.05s ease both}
.enterBtn.cast::after{opacity:1;animation:spellGlow 1.2s ease both}
.enterBtn.cast .spellBurst{opacity:1;animation:spellFade 1.2s ease both}
.enterBtn.cast .spellBurst span:nth-child(1){animation:runePop 1.05s ease both}
.enterBtn.cast .spellBurst span:nth-child(2){animation:runePop2 1.05s ease both}
.enterBtn.cast .spellBurst span:nth-child(3){animation:runePop3 1.05s ease both}
@keyframes spellShimmer{0%{transform:translateX(-70%) rotate(10deg)}100%{transform:translateX(70%) rotate(10deg)}}
@keyframes spellGlow{0%{opacity:0;transform:scale(.98)}18%{opacity:1}100%{opacity:0;transform:scale(1.02)}}
@keyframes spellFade{0%{opacity:0}20%{opacity:1}100%{opacity:0}}
@keyframes runePop{0%{opacity:0;transform:translate(-50%,-50%) scale(.55) rotate(-8deg)}18%{opacity:1}100%{opacity:0;transform:translate(-50%,-50%) scale(1.55) rotate(10deg)}}
@keyframes runePop2{0%{opacity:0;transform:translate(calc(-50% - 46px),calc(-50% + 10px)) scale(.5) rotate(10deg)}22%{opacity:1}100%{opacity:0;transform:translate(calc(-50% - 78px),calc(-50% + 6px)) scale(1.35) rotate(-12deg)}}
@keyframes runePop3{0%{opacity:0;transform:translate(calc(-50% + 42px),calc(-50% + 14px)) scale(.5) rotate(-6deg)}22%{opacity:1}100%{opacity:0;transform:translate(calc(-50% + 84px),calc(-50% + 12px)) scale(1.35) rotate(14deg)}}
.coverFade{
  position:fixed;
  inset:0;
  pointer-events:none;
  background: radial-gradient(60% 55% at 50% 15%, transparent 0%, rgba(0,0,0,.35) 70%, rgba(0,0,0,.55) 100%);
}

/* Sparkles (impact only: cover + save) */
.sparkle{
  position:fixed;
  width:6px;height:6px;border-radius:50%;
  background: radial-gradient(circle, rgba(255,255,255,.95), rgba(255,215,140,.7) 45%, rgba(255,255,255,0) 70%);
  box-shadow: 0 0 16px rgba(255,215,140,.55);
  pointer-events:none;
  animation: sparklePop 700ms ease-out forwards;
}
@keyframes sparklePop{
  from{transform:translate(-50%,-50%) scale(.6);opacity:0}
  30%{opacity:1}
  to{transform:translate(-50%,-90%) scale(1.3);opacity:0}
}

/* =========================
   Writer-space: “So here’s the thing…”
   ========================= */
#confession{
  min-height: 220px;
  line-height: 1.55;
  background:
    linear-gradient(180deg, rgba(0,0,0,.22), rgba(0,0,0,.12)),
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,.05) 0px,
      rgba(255,255,255,.05) 1px,
      transparent 1px,
      transparent 26px
    );
  border-color: rgba(214,177,90,.22);
}
#confession:focus{
  border-color: rgba(214,177,90,.45);
  box-shadow: 0 0 0 3px rgba(214,177,90,.14), 0 18px 40px rgba(0,0,0,.35);
}

/* =========================
   Library grouping
   ========================= */
.monthGroup{
  border:1px solid rgba(255,255,255,.10);
  border-radius:16px;
  background: rgba(0,0,0,.10);
  padding:12px;
}
.monthHeader{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:10px;
}
.monthTitle{
  font-weight:1000;
  letter-spacing:.04em;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, sans-serif;
}
.monthEra{
  min-width: 220px;
}
@media (max-width:780px){
  .monthHeader{flex-direction:column;align-items:flex-start}
  .monthEra{width:100%;min-width:0}
}

/* Small icon accents */
h2 .ico, summary .ico { margin-right:6px; }
